---
Demo:
    title: 'Azure Policy'
    module: 'モジュール 4 レッスン 5: Microsoft コンプライアンス ソリューションの機能について説明する: Azure Policy について説明する'
---


# デモ: Azure Policy

### デモ シナリオ
このデモでは、Azure Policyを設定するプロセスと、そのポリシーの影響について詳しく説明します。

#### デモ パート 1: リソース グループにタグを要求するポリシーを作成します (テンプレートでポリシーを作成する手順を示します)

1. Microsoft Edge を開きます。アドレス バーに、「**portal.microsoft.com**」と入力します。  管理者の資格情報でサインインしない場合は、すでにサインインしているはずです。

1. 検索ボックスのページ上部にある「Microsoft Azure」と表示されている場所の隣の青色バーに、「**ポリシー**」と入力し、検索結果で、「**ポリシー**」を選択します。

1. これで、「ポリシー」ページの概要が表示されます。ダッシュボードで利用可能な情報に注意してください。

1. 左ナビゲーション パネルで、「作成」の下の「**割り当て**」を選択します。  すでにポリシーが割り当てられていることに気付くでしょう。「**ASC 既定値**」を選択してください。  説明フィールドを確認します。注: 説明フィールドは、Microsoft Defender for Cloud にリブランドされた Azure Security Center を参照します。  ページの右上隅の「**X**」を選択して、「ポリシーの管理」ページに戻ります。

1. ページの上部で、「**ポリシーの割り当て**」を選択します。

1. 「ポリシーの割り当て」ウィザードが開き、管理者がポリシーを割り当てるプロセスをガイドします。  「ポリシー定義」フィールドの隣の**省略記号**を選択します。  使用可能なポリシー定義の一覧が表示されます。  

1. 「検索」バーに「**タグ**」と入力します。

1. 検索結果で、「**リソース グループにタグを要求する**」を選択してから (下にスクロールする必要がある場合があります)、「**選択**」を押します。  注: このポリシーの効果は、要件を満たさない新しいリソース グループの作成を拒否することです。  

1. 既定の割り当て名に注意してください。  名前はそのままにして、ページの下部で、「**次へ**」を選択します。

1. 「タグ名」フィールドに「**環境**」と入力し (リソース グループには環境タグが必要です)、「**次へ**」を選択します。  

1. 「修復」タブで説明を読みますが、設定は変更しないでください。**次へ**を選択します。

1. 非準拠メッセージに「**環境タグが必要です**」と入力し、「**次へ**」を選択します。注: このメッセージは、ポリシー割り当ての前に作成され、「環境」タグがないリソース グループの非準拠の理由として表示されます。  ポリシーの作成後に作成されたリソースグループの場合、「環境」タグがないと、リソース グループの作成は拒否されます。

1. ポリシーの割り当てを確認してから、「作成」を選択します。  ポリシーすぐに表示されない場合は、「**更新**」を選択します注: ポリシーが有効になるまで、最大で 30 分かかる可能性があります。

1. 画面の右上隅の「**X**」を選択して、「ポリシーの割り当て」ページを終了します。

1. これで、Azure サービスの「ホーム」ページが表示されます。  次のタスクで必要なため、このページを開いたままにしておきます。

#### デモ パート 2:  タグなしでリソース グループを作成してポリシーの影響を示し、タグを持つように修正します。

1. ページの上部、Azure Services と表示されている場所の下で、「**リソース グループ**」を選択します。一覧表示されているオプションが表示されない場合は、検索バーに「リソース グループ」と入力し、そこから選択します。

1. ページの左下隅で、「**+ 作成**」を選択します。

1. 「リソース グループの作成」の「基本」タブで、「サブスクリプション」フィールドをそのままにして、「Azure Pass - スポンサーシップ」を選択します。

1. 「リソース グループ」フィールドに、「**SC900-Labs**」と入力します。

1. 「リージョン」設定を既定のままにして、「**次へ: タグ**」を選択します。

1. タグの「名前と値」フィールドは空のままにします。  データを入力せずに、「**Review + create**」を選択します。

1. 検証に合格したことが表示され (タグの名と値はウィザードの必須フィールドではありません)、「**作成**」を選択します。

1. 画面上部に「リソース グループの作成に失敗しました。エラーの詳細を表示します」という失敗メッセージが表示されます。  「**エラーの詳細を表示**」を選択します。Azure ポリシーの一部である条件が満たされていないため、コンプライアンス違反のため、作成中のリソース グループがブロックされました。注: 失敗メッセージが表示されず、リソース グループが作成された場合は、ポリシーがまだ有効になっていないことが原因です。  前のタスクで作成したポリシーの「ポリシー」ページに移動します。ポリシーが有効になると、リソースが準拠していないことがわかります。  詳細ページには、コンプライアンス違反のメッセージが含まれます。

1. エラーの概要には、「リソース「SC900-Labs」がポリシーによって許可されていません」というエラーの種類が表示されます。  画面の左上隅の「**X**」を選択して、このウィンドウを閉じます。

1. 「リソース グループの作成」ウィンドウで、「**< 前へ**」を選択します。

1. リソース グループの作成の「タグ」ページに戻ります。  「名前」フィールドに「環境」と入力し、「値」フィールドに「**SC900-Labs**」と入力して、「**次へ: Review + Create >**」」を選択します。

1. タグを確認し、「**作成**」を選択します。

1. リソース グループが一覧表示されます。  タグがリソース グループで提供されたため、Azure ポリシーの一部として含まれている条件が満たされました。  リソース グループはポリシーに準拠しています。

#### 確認

このデモでは、Azure Policyを設定するプロセスと、そのポリシーの影響について説明しました。
